agents: { jobsize: "hours" }

##############################################################################
# Use this to test a specific branch/commit:
# Add to env:
#   NOV11: ee214ef77b827f969e4b5f056f5d866cf391be7a
# Add to commands:
# - pwd; git branch; git checkout $$NOV11

##############################################################################
# Note: "echo exit 13" prevents hang at genus/innovus prompt
env:
  TEST: 'echo exit 13 | mflowgen/test/test_module.sh'

steps:

##############################################################################
# INDIVIDUAL TILE RUNS
# Builds in dir e.g. mflowgen/full_chip/19-tile_array/16-Tile_MemCore

- label: '250MHz PE synth 12m'
  commands:
  - $TEST --need_space 30G full_chip --steps rtl --debug
  - 'pwd;
     ls full_chip;
     ls full_chip/*-rtl;
     rtl_dir=full_chip/*-rtl;
     grep Traceback $$rtl_dir/mflowgen-run.log && echo oh no failed silently oh no'


#      ls full_chip;
#      ls full_chip/*-tile_array;
#      ls full_chip/*-tile_array/*-rtl;
#      ls mflowgen;
#      rtl_dir=mflowgen/full_chip/*-tile_array/*-rtl;
#      echo rtl_dir=$$rtl_dir;
#      ls $$rtl_dir;
#      ls $$rtl_dir/outputs;
#      test -f $$rtl_dir/outputs/design.v || echo oh no failed silently oh no'
