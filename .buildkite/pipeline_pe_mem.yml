# (For per-build cache use cache.$$BUILDKITE_BUILD_NUMBER instead)
env:
  CACHEDIR: /sim/buildkite-agent/builds/cache


steps:


##############################################################################

- label: 'Synthesis: PE tile'
  agents: { jobsize: "hours" }
  command: .buildkite/SYN.sh -q PE

- wait ###################################################################

- label: 'END'
  command: exit 13
  # Note exit doesn't take effect until next "wait" barrier

- wait ###################################################################

##############################################################################






# let's re-able for a bit and see what happens!
# - label: 'DISABLED!'
#   command: exit 13
#   # Note exit doesn't take effect until we hit this "wait" barrier
# - wait ###########################################################


- label: 'Generator'
  agents: { jobsize: "hours" }
  command: .buildkite/GEN.sh -v

- wait #############################################################



- label: 'Synthesis: PE tile'
  agents: { jobsize: "hours" }
  command: .buildkite/SYN.sh -q PE

- label: 'Synthesis: Memory tile'
  agents: { jobsize: "hours" }
  command: .buildkite/SYN.sh -q MemCore

- wait #############################################################



- label: 'PNR: PE tile'
  agents: { jobsize: "hours" }
  command: .buildkite/PNR.sh -q PE

- label: 'PNR: Memory tile'
  agents: { jobsize: "hours" }
  command: .buildkite/PNR.sh -q MemCore
